<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Game Center</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #111;
    color: white;
    margin: 0; padding: 0;
    display: flex; flex-direction: column; align-items: center;
  }
  h1 {
    margin: 20px 0;
  }
  .game-center {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;
  }
  button.game-btn {
    padding: 15px 30px;
    font-size: 18px;
    cursor: pointer;
    border: none;
    border-radius: 10px;
    background: #444;
    color: white;
    transition: background 0.3s;
  }
  button.game-btn:hover {
    background: #666;
  }
  .game-area {
    background: #222;
    border-radius: 10px;
    padding: 20px;
    min-width: 320px;
    min-height: 400px;
    position: relative;
  }
  /* --- Speed Racer Styles --- */
  #speedRacerCanvas {
    background: linear-gradient(#333, #111);
    border-radius: 10px;
    display: block;
    margin: 0 auto;
  }
  .scoreboard {
    font-size: 20px;
    text-align: center;
    margin-top: 10px;
  }
  /* Neon Snake arrow controls */
  .arrow-controls {
    display: flex;
    justify-content: center;
    margin-top: 15px;
  }
  .arrow-button {
    font-size: 30px;
    background: #222;
    border: none;
    color: white;
    margin: 5px;
    width: 50px;
    height: 50px;
    border-radius: 8px;
    cursor: pointer;
    user-select: none;
    transition: background 0.2s;
  }
  .arrow-button:active {
    background: #555;
  }
</style>
</head>
<body>

<h1>Game Center</h1>
<div class="game-center">
  <button class="game-btn" id="yesNoBtn">Yes or No Quiz</button>
  <button class="game-btn" id="speedRacerBtn">Speed Racer</button>
  <button class="game-btn" id="neonSnakeBtn">Neon Snake</button>
</div>

<div class="game-area" id="gameArea">
  <!-- Game content will be injected here -->
</div>

<script>
  // Elements
  const gameArea = document.getElementById('gameArea');
  const yesNoBtn = document.getElementById('yesNoBtn');
  const speedRacerBtn = document.getElementById('speedRacerBtn');
  const neonSnakeBtn = document.getElementById('neonSnakeBtn');

  // --- Yes or No Quiz Game ---
  function loadYesNoQuiz() {
    gameArea.innerHTML = `
      <h2>Yes or No Quiz</h2>
      <p id="question">Do you like pizza?</p>
      <button id="yesBtn">Yes</button>
      <button id="noBtn">No</button>
      <p id="answer"></p>
    `;
    const answerP = document.getElementById('answer');
    document.getElementById('yesBtn').onclick = () => answerP.textContent = "Yummy! Pizza is awesome.";
    document.getElementById('noBtn').onclick = () => answerP.textContent = "No pizza? That's surprising!";
  }

  // --- Speed Racer Game with Sound Effects ---
  function loadSpeedRacer() {
    gameArea.innerHTML = `
      <h2>Speed Racer</h2>
      <canvas id="speedRacerCanvas" width="320" height="400"></canvas>
      <div class="scoreboard" id="speedScore">Score: 0</div>
    `;
    const canvas = document.getElementById('speedRacerCanvas');
    const ctx = canvas.getContext('2d');

    // Audio context & sound functions
    const AudioContext = window.AudioContext || window.webkitAudioContext;
    const audioCtx = new AudioContext();

    let engineOscillator;
    let engineGain;

    function startEngineSound() {
      if (engineOscillator) return; // already playing

      engineOscillator = audioCtx.createOscillator();
      engineGain = audioCtx.createGain();

      engineOscillator.type = 'sawtooth';
      engineOscillator.frequency.setValueAtTime(100, audioCtx.currentTime);

      engineGain.gain.setValueAtTime(0.05, audioCtx.currentTime); // low volume

      engineOscillator.connect(engineGain);
      engineGain.connect(audioCtx.destination);

      engineOscillator.start();
    }

    function stopEngineSound() {
      if (engineOscillator) {
        engineGain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.5);
        engineOscillator.stop(audioCtx.currentTime + 0.5);
        engineOscillator = null;
        engineGain = null;
      }
    }

    function playCollisionSound() {
      const oscillator = audioCtx.createOscillator();
      const gainNode = audioCtx.createGain();

      oscillator.type = 'square';
      oscillator.frequency.setValueAtTime(200, audioCtx.currentTime);

      gainNode.gain.setValueAtTime(0.2, audioCtx.currentTime);

      oscillator.connect(gainNode);
      gainNode.connect(audioCtx.destination);

      oscillator.start();
      oscillator.frequency.exponentialRampToValueAtTime(50, audioCtx.currentTime + 0.3);
      gainNode.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.3);

      oscillator.stop(audioCtx.currentTime + 0.3);
    }

    // Game variables
    const carWidth = 40;
    const carHeight = 70;
    let carX = canvas.width / 2 - carWidth / 2;
    const carY = canvas.height - carHeight - 10;
    let speed = 0;
    let maxSpeed = 8;
    let acceleration = 0.2;
    let deceleration = 0.1;
    let turnSpeed = 3;
    let carRotation = 0; // degrees

    // Obstacles
    let obstacles = [];
    let obstacleSpawnTimer = 0;
    let obstacleSpawnInterval = 90; // frames
    let score = 0;
    let gameOver = false;

    // Controls
    const keys = { left: false, right: false };

    // Event listeners for controls
    window.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowLeft' || e.key === 'a') keys.left = true;
      if (e.key === 'ArrowRight' || e.key === 'd') keys.right = true;
      if (e.key === ' ' && gameOver) { // Space to restart
        initGame();
      }
    });
    window.addEventListener('keyup', (e) => {
      if (e.key === 'ArrowLeft' || e.key === 'a') keys.left = false;
      if (e.key === 'ArrowRight' || e.key === 'd') keys.right = false;
    });

    // Draw the car
    function drawCar() {
      ctx.save();
      ctx.translate(carX + carWidth / 2, carY + carHeight / 2);
      ctx.rotate(carRotation * Math.PI / 180);
      ctx.fillStyle = 'red';
      ctx.fillRect(-carWidth / 2, -carHeight / 2, carWidth, carHeight);
      // Windows
      ctx.fillStyle = '#222';
      ctx.fillRect(-carWidth / 4, -carHeight / 4, carWidth / 2, carHeight / 3);
      ctx.restore();
    }

    // Draw road lane lines
    function drawLaneLines() {
      ctx.strokeStyle = 'white';
      ctx.lineWidth = 3;
      const lineHeight = 30;
      const gap = 20;
      const laneX = canvas.width / 2;

      ctx.beginPath();
      for(let y = 0; y < canvas.height; y += lineHeight + gap) {
        ctx.moveTo(laneX, y);
        ctx.lineTo(laneX, y + lineHeight);
      }
      ctx.stroke();
    }

    // Obstacle class
    class Obstacle {
      constructor(x, width, speed) {
        this.x = x;
        this.y = -60;
        this.width = width;
        this.height = 50;
        this.speed = speed;
      }
      update() {
        this.y += this.speed;
      }
      draw() {
        ctx.fillStyle = 'yellow';
        ctx.fillRect(this.x, this.y, this.width, this.height);
      }
      isOffScreen() {
        return this.y > canvas.height;
      }
      collidesWithCar() {
        return !(this.x + this.width < carX || this.x > carX + carWidth || this.y + this.height < carY || this.y > carY + carHeight);
      }
    }

    function initGame() {
      carX = canvas.width / 2 - carWidth / 2;
      speed = 0;
      carRotation = 0;
      obstacles = [];
      obstacleSpawnTimer = 0;
      score = 0;
      gameOver = false;
      document.getElementById('speedScore').textContent = 'Score: 0';
      startEngineSound();
      gameLoop();
    }

    // Game loop
    function gameLoop() {
      if (gameOver) {
        stopEngineSound();
        playCollisionSound();

        ctx.fillStyle = 'rgba(0,0,0,0.7)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = 'white';
        ctx.font = '30px Arial';
        ctx.textAlign = 'center';
        ctx.fillText('Game Over!', canvas.width/2, canvas.height/2 - 20);
        ctx.font = '20px Arial';
        ctx.fillText('Final Score: ' + score, canvas.width/2, canvas.height/2 + 20);
        ctx.fillText('Press Space or Speed Racer button to retry', canvas.width/2, canvas.height/2 + 50);
        return;
      }

      // Clear
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Draw road
      ctx.fillStyle = '#444';
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      drawLaneLines();

      // Update car speed - accelerate towards maxSpeed smoothly
      if (speed < maxSpeed) speed += acceleration;
      else speed -= deceleration;
      if (speed < 0) speed = 0;

      // Move car left/right with smooth rotation
      if (keys.left) {
        carX -= turnSpeed;
        if (carX < 0) carX = 0;
        carRotation = Math.max(carRotation - 4, -15);
      } else if (keys.right) {
        carX += turnSpeed;
        if (carX + carWidth > canvas.width) carX = canvas.width - carWidth;
        carRotation = Math.min(carRotation + 4, 15);
      } else {
        // Return rotation to zero if no turn keys pressed
        if (carRotation > 0) carRotation -= 4;
        else if (carRotation < 0) carRotation += 4;
      }

      drawCar();

      // Spawn obstacles randomly on the road lanes
      obstacleSpawnTimer++;
      if (obstacleSpawnTimer >= obstacleSpawnInterval) {
        obstacleSpawnTimer = 0;
        let lanePositions = [canvas.width / 4 - 30, canvas.width / 2 - 20, (3 * canvas.width) / 4 - 30];
        let randLane = lanePositions[Math.floor(Math.random() * lanePositions.length)];
        let randWidth = 30 + Math.random() * 30;
        let randSpeed = speed + Math.random() * 2;
        obstacles.push(new Obstacle(randLane, randWidth, randSpeed));
      }

      // Update obstacles
      for (let i = obstacles.length - 1; i >= 0; i--) {
        let obs = obstacles[i];
        obs.update();
        obs.draw();

        if (obs.collidesWithCar()) {
          gameOver = true;
        }

        if (obs.isOffScreen()) {
          obstacles.splice(i, 1);
          score++;
          document.getElementById('speedScore').textContent = 'Score: ' + score;
        }
      }

      requestAnimationFrame(gameLoop);
    }

    initGame();
  }

  // --- Neon Snake Game ---
  function loadNeonSnake() {
    // Placeholder content with arrow control buttons
    gameArea.innerHTML = `
      <h2>Neon Snake</h2>
      <canvas id="snakeCanvas" width="320" height="400" style="background:#000;display:block;margin:0 auto;"></canvas>
      <div class="arrow-controls">
        <button class="arrow-button" id="upBtn">⬆️</button>
      </div>
      <div class="arrow-controls">
        <button class="arrow-button" id="leftBtn">⬅️</button>
        <button class="arrow-button" id="downBtn">⬇️</button>
        <button class="arrow-button" id="rightBtn">➡️</button>
      </div>
      <p style="text-align:center;color:#ccc;">Use arrow keys or buttons to play.</p>
    `;
    // Snake game logic omitted for brevity here.
  }

  // Button handlers
  yesNoBtn.onclick = () => loadYesNoQuiz();
  speedRacerBtn.onclick = () => loadSpeedRacer();
  neonSnakeBtn.onclick = () => loadNeonSnake();

  // Load YesNoQuiz by default
  loadYesNoQuiz();
</script>

</body>
</html>
